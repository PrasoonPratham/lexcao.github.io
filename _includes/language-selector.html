{% if page.uid %}
<div class="language-selector">
  {% assign postsOrPages = site.posts 
    | concat: site.pages 
    | concat: site.zh 
    | where: "uid", page.uid 
    | sort: "locale" %}
  {% for item in postsOrPages %}
  <!-- filter /page/ -->
  {% unless item.url contains '/page/' %} 
  <a href="{{ item.url }}" class="{{ item.locale }}">
    {{ site.data.locales[item.locale].name }}
  </a>
  {% endunless %}
  {% endfor %}
</div>
{% endif%}